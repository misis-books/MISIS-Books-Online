var Methods={addAuthor:function(){var a=document.getElementById("popup_author_input"),b=document.getElementById("popup_id_edition"),c=a.value,b=b.value;c.length&&!/^\s+/i.test(c)&&b&&/^(\d+)?$/i.test(b)?($(".popup_submit").prop("disabled",!0).text("\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430..."),a={},a.url=Settings.base_url+"/"+Settings.methods_dir+"/"+Settings.materials_base+"."+Settings.addauthor_method,a.data={id:b,author:c},console.log(a),Ajax.post(a,Methods.handlerAuthorAdded)):(a.value=
"",a.focus())},handlerAuthorAdded:function(a){document.getElementById("popup_author_input").value="";$(".popup_submit").prop("disabled",!1).text("\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c");$(".popup_submit_state").fadeIn(200);$(".popup_submit_description").fadeOut(200);setTimeout(function(){$(".popup_submit_state").fadeOut(200);$(".popup_submit_description").fadeIn(200)},2E3)},sendTicket:function(){var a=document.getElementById("tickets_text"),b=a.value,c=$(".support_content_email"),d=document.getElementById("tickets_email"),
e=d.value;b.length&&!/^\s+/i.test(b)?"none"==c.css("display")?(c.slideDown(100),d.focus()):e.length&&!/^\s+/i.test(e)&&this.isValidEmail(e)?($(".support_submit").prop("disabled",!0).text("\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430..."),a={},a.url=Settings.base_url+"/"+Settings.methods_dir+"/"+Settings.materials_base+"."+Settings.sendticket_method,a.data={email:e,ticket_message:b},console.log(a),Ajax.post(a,Methods.handlerTicket)):(d.value="",d.focus(),this.flag_animate&&(this.flag_animate=!1,
$("#support_valid_email").stop().fadeIn(200),setTimeout(function(){$("#support_valid_email").stop().fadeOut(200);setTimeout(function(){Methods.flag_animate=!0},200)},1E3))):a.focus()},handlerTicket:function(a){document.getElementById("tickets_email").value="";document.getElementById("tickets_text").value="";$(".support_content_email").slideUp(200);document.getElementById("tickets_text").focus();$(".support_submit").prop("disabled",!1).text("\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c");
$("#support_submit_state").fadeIn(200);setTimeout(function(){$("#support_submit_state").fadeOut(200)},3E3)},isValidEmail:function(a,b){b||(a=a.replace(/^s+|s+$/g,""));return/^([a-z0-9_-]+.)*[a-z0-9_-]+@([a-z0-9][a-z0-9-]*[a-z0-9].)+[a-z]{2,4}$/i.test(a)},flag_animate:!0,addEdition:function(){var a=document.getElementById("add_edition_text"),b=a.value;b.length&&!/^\s+/i.test(b)?($(".popup_submit").prop("disabled",!0).text("\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430..."),a={},a.url=Settings.base_url+
"/"+Settings.methods_dir+"/"+Settings.materials_base+"."+Settings.addedition_method,a.data={link:b,hash:Search.createHash(32)},console.log(a),Ajax.post(a,Methods.handlerEditionAdded)):(a.value="",a.focus())},handlerEditionAdded:function(a){a=document.getElementById("add_edition_text");a.value="";a.focus();$(".popup_submit").prop("disabled",!1).text("\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c");$(".popup_submit_state").fadeIn(200);$(".popup_submit_description").fadeOut(200);setTimeout(function(){$(".popup_submit_state").fadeOut(200);
$(".popup_submit_description").fadeIn(200)},2E3)}};